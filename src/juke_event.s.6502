.event_handler
	CMP #6; is A set with the ESCAPE event number?
	BNE no_escape
	LDA flags
	ORA #%00001000;			set bit 3 (escape)
	STA flags
.no_escape
	CMP #2; is A set with CHARACTER event number?
	BNE no_character
	LDA flags
	ORA #%00010000;			set bit 4
	STA flags
	STY pressed_key;		store the ascii value
.no_character
	JMP (evntv_old)